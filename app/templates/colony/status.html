{% extends 'index.html' %}
{% from 'macros/_buildings_cards.html' import building_card_simple %}
{% from 'macros/_remove_milliseconds.html' import remove_milliseconds %}

{% block title %}{{ current_colony.name }}
{% endblock %}

{% block content %}

    <h1>Kolonia {{ current_colony.name }}</h1>
    <p>ID: {{ current_colony.id }}</p>
    <p>
        Właściciel: {{ current_colony.owner.username }}
        <a href="/user/{{current_colony.owner.id}}/profile">
            <button>Przejdź do profilu</button>
        </a>
    </p>

    <div>
        <p>Kolejka budowy:</p>

        <ol>
            {% for building in current_colony.construction_list %}
                <li>
                    {{ building.name }} ({{ building.level }} lvl):<br>
                    {{ remove_milliseconds(building.start_build) }} - {{ remove_milliseconds(building.end_build) }}
                    <form method="POST">
                        <input type="hidden" name="abort" value="{{ building.name|lower }}">
                        <button>Przerwij</button>
                    </form>
                </li>
            {% else %}
                <p>Brak</p>
            {% endfor %}
        </ol>
    </div>
    

    <div>
        <p>
            Budynki:
            <a href="/colony/{{current_colony.id}}/constructions"><button type="button">Panel budowniczego</button></a>
        </p>

        <div style="overflow-y: scroll; border: 1px solid; height: 512px; width: 1024px; display: flex; flex-flow: wrap row;">
            {% for raw_name, building in buildings.items() %}
                {{ building_card_simple(building) }}
                <a href="/colony/{{current_colony.id}}/{{building.name|lower}}"><button type="button">Przejdź do budybku</button></a>
            {% else %}
                <h3>Brak</h3>
            {% endfor %}
        </div>
    </div>

    <div>
        <p>Materiały:</p>

        <ul>
            {% for raw_name, resource in resources.items() %}
                <li>{{ raw_name }}: {{ resource[0]|int }}/{{ resource[2]|int }} | {{ resource[1]|round }}/h</li>
            {% endfor %}
        </ul>
    </div>

{% endblock %}